DEFINE_IMPORT(FileName=C:\PIXY_2.0\RECIPES\COMMONPOINTS.TXT)


DEFINE_GRID(VariableName=PITREGRID_T1, _
 X=70.7, _
 Y=75, _
 Z=-16.8, _
 XSteps=3, _
 XIncrement=-9, _
 YSteps=3, _
 YIncrement=9)


MOVE_TO_SAFE_HEIGHT(Speed_pct=30)


DEFINE_VARIABLE(VariableName=WASH_CYCLES, _
 VariableType=INT, _
 VariableValue=1)


DEFINE_VARIABLE(VariableName=I1, _
 VariableType=INT, _
 VariableValue=0)


DEFINE_VARIABLE(VariableName=I2, _
 VariableType=INT, _
 VariableValue=0)


DEFINE_VARIABLE(VariableName=SAMPLES_COL, _
 VariableType=INT, _
 VariableValue=0)


DEFINE_VARIABLE(VariableName=ASP_UL, _
 VariableType=DOUBLE, _
 VariableValue=40.0)


DEFINE_VARIABLE(VariableName=DISP_UL, _
 VariableType=DOUBLE, _
 VariableValue=12)


DEFINE_VARIABLE(VariableName=SAMPLE_ROW_ST, _
 VariableType=INT, _
 VariableValue=1)


DEFINE_VARIABLE(VariableName=SAMPLE_ROW_END, _
 VariableType=INT, _
 VariableValue=1)


GET_INTEGER_FROM_USER(VariableName=SAMPLES_COL, _
 Prompt=ENTER STARTING SAMPLE WELL COLUMN 1=D1   12=D12), _
 MinValue=1, _
 MaxValue=12, _
 ValueIfUserCancels=1)


GET_INTEGER_FROM_USER(VariableName=SAMPLE_ROW_ST, _
 Prompt=ENTER STARTING SAMPLE WELL ROW 1=D   3=F), _
 MinValue=1, _
 MaxValue=3, _
 ValueIfUserCancels=1)


GET_INTEGER_FROM_USER(VariableName=SAMPLE_ROW_END, _
 Prompt=ENTER ENDING SAMPLE WELL ROW 1=D    3=F), _
 MinValue=SAMPLE_ROW_ST, _
 MaxValue=3, _
 ValueIfUserCancels=1)


VARIABLE_MATH(SAMPLES_COL = SAMPLES_COL - 1)


VARIABLE_MATH(SAMPLE_ROW_ST = SAMPLE_ROW_ST - 1)


VARIABLE_MATH(SAMPLE_ROW_END = SAMPLE_ROW_END - 1)


' WASH THE TIPS


FOR(I1 = SAMPLE_ROW_ST To SAMPLE_ROW_END Step 1)


	IF(WASH_CYCLES > 0)


		WASH_TIPS(SyringeMask=0, _
		 VolumePerStroke_uL=20, _
		 NumSyringeStrokes=WASH_CYCLES, _
		 SyringeSpeedPull=13, _
		 SyringeSpeedPush=15, _
		 DelayAfter_ms=500, _
		 Tip1Point=WASH_PT_T1, _
		 MoveSpeedOut_pct=30)


		SYRINGE_SET_VALVE(SyringeMask=0, _
		 ValvePosition=1, _
		 DelayAfter_ms=100)


	ENDIF


	MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
	 Point=PICKUP_SAMPLE_T1[SAMPLES_COL,I1], _
	 XOffset=0, _
	 YOffset=0, _
	 ZOffset=10, _
	 Speed_pct=50, _
	 MoveToSafeHeightFirst=TRUE)


	MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
	 Point=PICKUP_SAMPLE_T1[SAMPLES_COL,I1], _
	 Speed_pct=20, _
	 MoveToSafeHeightFirst=FALSE)


	' ASPIRATE (FROM OUTPUT IS DEFAULT)


	ASPIRATE(SyringeMask=0, _
	 Volume_uL=ASP_UL, _
	 SyringeSpeed=16, _
	 ValveToBypass=FALSE, _
	 DelayAfter_ms=500)


	' DISPENSE 1UL BACK IN TO HELP WITH SYRINGE HYSTERISIS.


	DISPENSE(SyringeMask=0, _
	 Volume_uL=1, _
	 SyringeSpeed=21, _
	 ValveToBypass=FALSE, _
	 DelayAfter_ms=200)


	' PULL OUT SLOWLY


	MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
	 Point=PICKUP_SAMPLE_T1[SAMPLES_COL,I1], _
	 XOffset=0, _
	 YOffset=0, _
	 ZOffset=10, _
	 Speed_pct=20, _
	 MoveToSafeHeightFirst=FALSE)


	' MOVE OVER THE PITRE DISH


	MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
	 Point=PITREGRID_T1[I1,0], _
	 XOffset=0, _
	 YOffset=0, _
	 ZOffset=3, _
	 Speed_pct=20, _
	 MoveToSafeHeightFirst=TRUE)


	FOR(I2 = 0 To 2 Step 1)


		' MOVE RIGHT ONTO TARGE


		MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
		 Point=PITREGRID_T1[I1,I2], _
		 Speed_pct=20, _
		 MoveToSafeHeightFirst=FALSE)


		DISPENSE(SyringeMask=0, _
		 Volume_uL=DISP_UL, _
		 SyringeSpeed=21, _
		 ValveToBypass=FALSE, _
		 DelayAfter_ms=200)


		PAUSE(UserMessage=WAIT, _
		 PauseTime_ms=300)


		MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
		 Point=PITREGRID_T1[I1,I2], _
		 ZOffset=5, _
		 Speed_pct=20, _
		 MoveToSafeHeightFirst=FALSE)


	NEXT


	MOVE_TO_SAFE_HEIGHT(Speed_pct=30)


NEXT


' FINAL WASH


' IF(WASH_CYCLES > 0)


WASH_TIPS(SyringeMask=0, _
 VolumePerStroke_uL=50, _
 NumSyringeStrokes=WASH_CYCLES, _
 SyringeSpeedPull=13, _
 SyringeSpeedPush=15, _
 DelayAfter_ms=500, _
 Tip1Point=WASH_PT_T1, _
 MoveSpeedOut_pct=30)


' ENDIF


SYRINGE_SET_VALVE(SyringeMask=0, _
 ValvePosition=1, _
 DelayAfter_ms=100)


MOVE_TO_POINT(Tool=SYSTEM_TIP1, _
 Point=SAFE_PT, _
 Speed_pct=20, _
 MoveToSafeHeightFirst=TRUE)


